# sfsdkhh
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Kochi Tourism Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css"/>

<style>
body{
  margin:0;
  font-family:"Poppins","Noto Sans JP",sans-serif;
  display:flex;
  height:100vh;
  background:#f4f6f8;
}

/* sidebar */
#sidebar{
  width:300px;
  background:#fff;
  padding:12px;
  overflow-y:auto;
  box-shadow:2px 0 8px rgba(0,0,0,0.08);
}
#sidebar h2{
  margin:0 0 12px;
  font-size:18px;
}
#spot-list{
  list-style:none;
  padding:0;
  margin:0;
}
#spot-list li{
  margin-bottom:8px;
  cursor:pointer;
}
.side-item{
  background:#f9fafb;
  border-radius:10px;
  padding:10px;
  transition:.2s;
}
.side-item:hover{
  background:#e3f2fd;
}
.side-title{
  font-weight:600;
  font-size:14px;
}
.side-genre{
  display:inline-block;
  margin-top:6px;
  padding:2px 8px;
  font-size:11px;
  border-radius:10px;
}
.side-genre[data-genre="Ëá™ÁÑ∂"]{background:#e8f5e9;color:#2e7d32;}
.side-genre[data-genre="ÊñáÂåñ"]{background:#e3f2fd;color:#1565c0;}
.side-genre[data-genre="„Ç∞„É´„É°"]{background:#fff3e0;color:#ef6c00;}
.side-genre[data-genre="‰ΩìÈ®ì"]{background:#f3e5f5;color:#6a1b9a;}

/* map */
#map{
  flex:1;
  position:relative;
}

/* locate button */
#locate-btn{
  position:absolute;
  right:20px;
  bottom:20px;
  width:48px;
  height:48px;
  border:none;
  border-radius:50%;
  background:#1976d2;
  color:#fff;
  font-size:22px;
  cursor:pointer;
  z-index:1000;
  box-shadow:0 4px 10px rgba(0,0,0,.3);
}

/* language switch */
#lang-switch{
  position:absolute;
  right:20px;
  bottom:80px;
  width:auto;
  padding:6px 12px;
  background:#1976d2;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
  z-index:1000;
}

/* popup */
.leaflet-popup-content-wrapper{
  border-radius:14px;
}
.popup-name{
  font-weight:700;
  font-size:16px;
}
.popup-stars{
  color:#ffb400;
  margin:4px 0;
}
.popup-desc{
  font-size:13px;
  line-height:1.4;
}
.popup-link a{
  display:inline-block;
  margin-top:6px;
  color:#1976d2;
  font-weight:600;
  text-decoration:none;
}
</style>
</head>

<body>

<div id="sidebar">
  <h2 id="sidebar-title">È´òÁü•Ë¶≥ÂÖâ„Çπ„Éù„ÉÉ„Éà</h2>
  <ul id="spot-list"></ul>
</div>

<div id="map">
  <button id="locate-btn">üìç</button>
  <button id="lang-switch">EN</button>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.min.js"></script>
<script>
let lang = 'ja';
const text = {
  ja: {current:"üìç ÁèæÂú®Âú∞",official:"ÂÖ¨Âºè„Éö„Éº„Ç∏ ‚Üí",sidebar:"È´òÁü•Ë¶≥ÂÖâ„Çπ„Éù„ÉÉ„Éà"},
  en: {current:"üìç Current Location",official:"Official Page ‚Üí",sidebar:"Kochi Tourism Spots"}
};

const map = L.map("map").setView([33.5597,133.5311],9);

/* „Éû„ÉÉ„ÉóÂàáÊõø„É¨„Ç§„É§„Éº */
const baseLayers = {
  "Ë°õÊòü": L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}", {attribution:"Tiles ¬© Esri"}),
  "Ê®ôÊ∫ñ": L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {attribution:"¬© OpenStreetMap"}),
  "Âú∞ÂΩ¢": L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png", {attribution:"¬© OpenTopoMap"})
};
baseLayers["Ë°õÊòü"].addTo(map);
L.control.layers(baseLayers).addTo(map);

const genrePins = {
  "Ëá™ÁÑ∂":"https://maps.google.com/mapfiles/ms/icons/green-dot.png",
  "ÊñáÂåñ":"https://maps.google.com/mapfiles/ms/icons/blue-dot.png",
  "„Ç∞„É´„É°":"https://maps.google.com/mapfiles/ms/icons/orange-dot.png",
  "‰ΩìÈ®ì":"https://maps.google.com/mapfiles/ms/icons/purple-dot.png"
};

/* Ë¶≥ÂÖâÂú∞„Éá„Éº„Çø */
const spots = [
 {name:{ja:"Ê°ÇÊµú",en:"Katsurahama"},lat:33.4961,lng:133.5715,stars:5,genre:"ÊñáÂåñ",desc:{ja:"ÂùÇÊú¨ÈæçÈ¶¨ÂÉè„ÅßÊúâÂêç„Å™ÊôØÂãùÂú∞„ÄÇ",en:"Famous for Sakamoto Ryoma statue."},link:"https://katsurahama-park.com/"},
 {name:{ja:"‰ªÅÊ∑ÄÂ∑ù",en:"Niyodo River"},lat:33.5535,lng:133.0458,stars:5,genre:"Ëá™ÁÑ∂",desc:{ja:"‰ªÅÊ∑Ä„Éñ„É´„Éº„ÅÆÊ∏ÖÊµÅ„ÄÇ",en:"Clear river with Niyodo Blue."},link:"https://kochi-tabi.jp/"},
 {name:{ja:"„Å´„ÅìÊ∑µ",en:"Niko Falls"},lat:33.6446,lng:133.1656,stars:4,genre:"Ëá™ÁÑ∂",desc:{ja:"Á•ûÁßòÁöÑ„Å™ÊªùÂ£∫„ÄÇ",en:"Mystical waterfall basin."},link:"https://kochi-tabi.jp/"},
 {name:{ja:"ÂåóÂ∑ùÊùë„É¢„Éç„ÅÆÂ∫≠",en:"Monet Garden Kitagawa"},lat:33.5836,lng:134.0622,stars:4,genre:"ÊñáÂåñ",desc:{ja:"„É¢„ÉçÂÖ¨Ë™ç„ÅÆÂ∫≠Âúí„ÄÇ",en:"Official Monet garden."},link:"https://www.monet-garden.jp/"},
 {name:{ja:"ÂõõÂõΩ„Ç´„É´„Çπ„Éà",en:"Shikoku Karst"},lat:33.3652,lng:132.9253,stars:4,genre:"Ëá™ÁÑ∂",desc:{ja:"Ê®ôÈ´ò1000m„ÅÆÁµ∂ÊôØÈ´òÂéü„ÄÇ",en:"Spectacular plateau at 1000m."},link:"https://visitkochijapan.com/"},
 {name:{ja:"È´òÁü•Âüé",en:"Kochi Castle"},lat:33.5599,lng:133.5312,stars:3,genre:"ÊñáÂåñ",desc:{ja:"ÁèæÂ≠òÂ§©ÂÆà„ÅÆÂüé„ÄÇ",en:"Existing castle keep."},link:"https://kochipark.jp/kochijyo/"},
 {name:{ja:"„Å≤„Çç„ÇÅÂ∏ÇÂ†¥",en:"Hirome Market"},lat:33.5586,lng:133.5310,stars:4,genre:"„Ç∞„É´„É°",desc:{ja:"È´òÁü•„Ç∞„É´„É°„ÅÆËÅñÂú∞„ÄÇ",en:"Famous local food market."},link:"https://www.hirome.co.jp/"},
 {name:{ja:"ÂùÇÊú¨ÈæçÈ¶¨Ë®òÂøµÈ§®",en:"Ryoma Memorial Museum"},lat:33.5072,lng:133.5905,stars:4,genre:"ÊñáÂåñ",desc:{ja:"ÈæçÈ¶¨„ÅÆË≥áÊñôÈ§®„ÄÇ",en:"Museum of Ryoma."},link:"https://ryoma-kinenkan.jp/"},
 {name:{ja:"Âõõ‰∏áÂçÅÂ∑ù",en:"Shimanto River"},lat:33.2333,lng:132.8667,stars:5,genre:"Ëá™ÁÑ∂",desc:{ja:"Êó•Êú¨ÊúÄÂæå„ÅÆÊ∏ÖÊµÅ„ÄÇ",en:"Last clear river in Japan."},link:"https://kochi-tabi.jp/"},
 {name:{ja:"ÁâßÈáéÊ§çÁâ©Âúí",en:"Makino Botanical Garden"},lat:33.5612,lng:133.5372,stars:4,genre:"Ëá™ÁÑ∂",desc:{ja:"ÁâßÈáéÂØåÂ§™ÈÉé„ÇÜ„Åã„Çä„ÄÇ",en:"Associated with Tomitaro Makino."},link:"https://www.makino.or.jp/"},
 {name:{ja:"ÈáëÂâõÁ¶èÂØ∫",en:"Kongofukuji"},lat:32.7280,lng:133.0282,stars:4,genre:"ÊñáÂåñ",desc:{ja:"Á¨¨38Áï™Êú≠ÊâÄ„ÄÇ",en:"38th temple."},link:"https://www.kongofukuji.or.jp/"},
 {name:{ja:"Á®≤Âè¢Â±±",en:"Mount Inamura"},lat:33.6312,lng:133.1150,stars:4,genre:"Ëá™ÁÑ∂",desc:{ja:"È´òÁü•ÊúÄÈ´òÂ≥∞„ÄÇ",en:"Highest peak in Kochi."},link:"https://kochi-tabi.jp/"},
 {name:{ja:"Âúü‰ΩêÁ•ûÁ§æ",en:"Tosa Shrine"},lat:33.5650,lng:133.5365,stars:4,genre:"ÊñáÂåñ",desc:{ja:"Âúü‰Ωê‰∏ÄÂÆÆ„ÄÇ",en:"Chief shrine of Tosa."},link:"https://www.tosajinja.or.jp/"},
 {name:{ja:"Ê°ÇÊµúÊ∞¥ÊóèÈ§®",en:"Katsurahama Aquarium"},lat:33.4955,lng:133.5730,stars:3,genre:"‰ΩìÈ®ì",desc:{ja:"„É¨„Éà„É≠Ê∞¥ÊóèÈ§®„ÄÇ",en:"Retro aquarium."},link:"https://katurahama-aq.jp/"},
 {name:{ja:"Á´πÊûóÂØ∫",en:"Chikurinji"},lat:33.6060,lng:133.5310,stars:4,genre:"ÊñáÂåñ",desc:{ja:"Á¨¨31Áï™Êú≠ÊâÄ„ÄÇ",en:"31st temple."},link:"https://www.takeshindenji.jp/"},
 {name:{ja:"Ë∂≥Êë∫Â≤¨",en:"Cape Ashizuri"},lat:32.7075,lng:133.0275,stars:5,genre:"Ëá™ÁÑ∂",desc:{ja:"È´òÁü•ÊúÄÂçóÁ´Ø„ÄÇ",en:"Southernmost point of Kochi."},link:"https://kochi-tabi.jp/"},
 {name:{ja:"Êó•ÊõúÂ∏Ç",en:"Sunday Market"},lat:33.5589,lng:133.5300,stars:4,genre:"‰ΩìÈ®ì",desc:{ja:"ÊØéÈÄ±ÈñãÂÇ¨„ÅÆÊúùÂ∏Ç„ÄÇ",en:"Weekly morning market."},link:"https://kochi-tabi.jp/"},
 {name:{ja:"Á£ØÊú®Ê¥û",en:"Isokidou"},lat:33.4560,lng:133.4820,stars:4,genre:"Ëá™ÁÑ∂",desc:{ja:"Ëãî„ÇÄ„Åó„ÅüÊ∏ìË∞∑„ÄÇ",en:"Mossy valley."},link:"https://kochi-tabi.jp/"},
 {name:{ja:"Êùâ„ÅÆÂ§ßÊùâ",en:"Sugi no Osugi"},lat:33.4815,lng:133.3040,stars:5,genre:"Ëá™ÁÑ∂",desc:{ja:"Ê®πÈΩ¢3000Âπ¥„ÄÇ",en:"3000-year-old tree."},link:"https://kochi-tabi.jp/"}
];

function stars(n){ return "‚òÖ".repeat(n)+"‚òÜ".repeat(5-n); }

let markers = [];
spots.forEach(s=>{
 const m = L.marker([s.lat,s.lng],{
   icon:L.icon({iconUrl:genrePins[s.genre],iconSize:[32,32],iconAnchor:[16,32]})
 }).addTo(map);
 m.bindPopup(`
   <div class="popup-name">${s.name[lang]}</div>
   <div class="popup-stars">${stars(s.stars)}</div>
   <div class="popup-desc">${s.desc[lang]}</div>
   <div class="popup-link"><a href="${s.link}" target="_blank">${text[lang].official}</a></div>
 `);

 const li = document.createElement("li");
 li.innerHTML = `
   <div class="side-item">
     <div class="side-title">${s.name[lang]}</div>
     <div class="side-genre" data-genre="${s.genre}">${s.genre}</div>
   </div>
 `;
 li.onclick = ()=>{
   map.setView([s.lat,s.lng],13);
   m.openPopup();
   if(cur) route.setWaypoints([[cur.getLatLng().lat, cur.getLatLng().lng],[s.lat,s.lng]]);
 };
 document.getElementById("spot-list").appendChild(li);
 markers.push(m);
});

/* ÁèæÂú®Âú∞Ëá™ÂãïË°®Á§∫ÔºÜÁµåË∑ØÊ°àÂÜÖ */
let cur=null, acc=null;
const redPin = "https://maps.google.com/mapfiles/ms/icons/red-dot.png";
const route = L.Routing.control({waypoints: [], show: false}).addTo(map);

function locateAndRoute(){
 navigator.geolocation.getCurrentPosition(p=>{
   const {latitude,longitude,accuracy}=p.coords;
   if(cur){map.removeLayer(cur); map.removeLayer(acc);}
   cur = L.marker([latitude,longitude],{
     icon:L.icon({iconUrl:redPin, iconSize:[32,32], iconAnchor:[16,32]})
   }).addTo(map).bindPopup(text[lang].current).openPopup();
   acc = L.circle([latitude,longitude],{radius:accuracy,color:"#1976d2",fillOpacity:.15}).addTo(map);
   map.setView([latitude,longitude],12);
 });
}

document.getElementById("locate-btn").onclick = locateAndRoute;
/* „Éö„Éº„Ç∏„É≠„Éº„ÉâÊôÇ„Å´Ëá™ÂãïÂèñÂæó */
locateAndRoute();

/* Ë®ÄË™ûÂàáÊõø */
document.getElementById("lang-switch").onclick = ()=>{
 lang = (lang==='ja')?'en':'ja';
 document.getElementById("sidebar-title").textContent = text[lang].sidebar;
 document.querySelectorAll("#spot-list .side-title").forEach((el,i)=>{el.textContent=spots[i].name[lang];});
 markers.forEach((m,i)=>{
   m.setPopupContent(`
     <div class="popup-name">${spots[i].name[lang]}</div>
     <div class="popup-stars">${stars(spots[i].stars)}</div>
     <div class="popup-desc">${spots[i].desc[lang]}</div>
     <div class="popup-link"><a href="${spots[i].link}" target="_blank">${text[lang].official}</a></div>
   `);
 });
};
</script>

</body>
</html>
